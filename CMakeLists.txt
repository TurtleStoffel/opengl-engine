CMAKE_MINIMUM_REQUIRED(VERSION 3.5)

IF(NOT CMAKE_BUILD_TYPE)
    MESSAGE(STATUS "Building in Release mode")
    SET(CMAKE_BUILD_TYPE Release)
    SET(CMAKE_CXX_FLAGS_RELEASE "-O3")
ENDIF()

FIND_PACKAGE(SDL2 REQUIRED)
FIND_PACKAGE(OpenGL REQUIRED)
FIND_PACKAGE(GLEW REQUIRED)
FIND_PACKAGE(glm REQUIRED)

SET(nanovg_src
    ${CMAKE_CURRENT_SOURCE_DIR}/ext/nanovg/src/nanovg.c
)
ADD_LIBRARY(nanovg STATIC ${nanovg_src})

INCLUDE_DIRECTORIES(
    ${GLEW_INCLUDE_DIRS}
    ${GLM_INCLUDE_DIRS}
    ${CMAKE_CURRENT_SOURCE_DIR}/ext/nanovg/src
)

ADD_COMPILE_OPTIONS(
    -std=c++11
    -Wall
    -Wextra
)

FILE(GLOB_RECURSE sources "src/*.cpp")

ADD_EXECUTABLE(GodWorld ${sources})

TARGET_INCLUDE_DIRECTORIES(GodWorld PRIVATE include)

TARGET_LINK_LIBRARIES(GodWorld
    ${SDL2_LIBRARIES}
    ${OPENGL_LIBRARIES}
    ${GLEW_LIBRARIES}
    ${GLM_LIBRARIES}
    nanovg
)

SET(CMAKE_EXPORT_COMPILE_COMMANDS 1)
